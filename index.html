<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rock, Paper, Scissors</title>
</head>
<body>

    <script>

      
        let i = 0
     // Count is player rounds won, ccount is Computer rounds won  
        let count = 0;
        let ccount = 0;
        let maxRounds = Number(window.prompt("Best out of X", "5"));
        let roundsToWin = Math.floor(maxRounds/2) + 1;
        
        
        
       
    
    
        
    
    //Computer chooses here
    
    function getComputerChoice() {
             val = Math.floor(Math.random()*3) + 1; 
            if (val == 1) {
                computerSelector = "rock";
                return computerSelector;
            }
            else if (val == 2) {
                computerSelector = "scissor";
                return computerSelector;
            }
    
            else if (val == 3) {
                computerSelector = "paper";
                return computerSelector;
            }
    
    
       
    }
    // Counter for each round, score(1) increase player wins, score(2) increases computer wins 
    
    function score(roundOutcome) {
        switch (roundOutcome) {
            case 1:
                count++;
                break;
            case 2: 
                ccount++;
                break;    
        }
        if (count == roundsToWin) {
            return "You won!.";
        }
        else if (ccount == roundsToWin) {
            return "You lost!.";
        }
    
        
    
    } 
    
    
    //A round happens here, score(1) increases player wins, score(2) increases computer wins
    
    
    function playRound() {
        let computerSelection = getComputerChoice();
        let playerChoice = window.prompt("Choose Rock, Paper, or Scissors", "rock");
        let playerSelection = playerChoice.toLowerCase();
        if ((playerSelection == "rock") && (computerSelection == "scissor")) {
            score(1);
            return "You win! Rock beats Scissor";
            
        }
        else if ((playerSelection == "rock") && (computerSelection == "paper")) {
            score(2);
            return "You lose, Paper beats Rock";
        }
        else if ((playerSelection == "rock") && (computerSelection == "rock")) {
            if (i > 0) {
                i--;}
            return "You tie"
        }
        else if ((playerSelection == "paper") && (computerSelection == "scissor")) {
            score(2);
            return "You lose, Scissor beats Paper";
        }
        else if ((playerSelection == "paper") && (computerSelection == "paper")) {
            if (i > 0) {
                i--;}
            return "You tie";
        }
        else if ((playerSelection == "paper") && (computerSelection == "rock")) {
            score(1);
            return "You win, Paper beats Rock";
        }
        else if ((playerSelection == "scissor") && (computerSelection == "scissor")) {
            if (i > 0) {
                i--;}
            return "You tie";
        }
        else if ((playerSelection == "scissor") && (computerSelection == "paper")) {
            score(1);
            return "You win, Scissory beats Paper";
        }
        else if ((playerSelection == "scissor") && (computerSelection == "rock")) {
            score(2);
            return "You lose, Rock beats Scissor";
        }
    }
    
    //This play i amount of rounds
    
    
    function game() {
    for (i = 0; i < maxRounds; i++) {
        console.log(playRound());
        if (count == roundsToWin || ccount == roundsToWin) {
            break;
        }
    }
        console.log(score());
    }
    
    window.addEventListener('load', game);
        </script>
    
</body>
</html>